# XPouch AI v3.0

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.13+](https://img.shields.io/badge/Python-3.13+-blue.svg)](https://www.python.org/downloads/)
[![React 18](https://img.shields.io/badge/React-18.3-61dafb.svg)](https://reactjs.org/)

XPouch AI v3.0 æ˜¯ä¸€ä¸ªåŸºäº **LangGraph** çš„ä¼ä¸šçº§å¤šæ™ºèƒ½ä½“ AI åä½œå¹³å°ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒç®€å•å¯¹è¯æ¨¡å¼å’Œå¤æ‚ä»»åŠ¡åä½œæ¨¡å¼ä¸¤ç§äº¤äº’æ–¹å¼ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¤– åŒæ¨¡æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ

**ç®€å•æ¨¡å¼ï¼ˆSimple Modeï¼‰**
- ç›´æ¥è°ƒç”¨ LLM è¿›è¡Œå¯¹è¯å“åº”
- é€‚ç”¨äºæ—¥å¸¸é—®ç­”ã€å¿«é€Ÿå’¨è¯¢åœºæ™¯
- æ”¯æŒè‡ªå®šä¹‰æ™ºèƒ½ä½“åˆ›å»º
- ä½å»¶è¿Ÿã€é«˜å“åº”é€Ÿåº¦

**å¤æ‚æ¨¡å¼ï¼ˆComplex Modeï¼‰**
- åŸºäº LangGraph çš„å¤šä¸“å®¶åä½œå·¥ä½œæµ
- æŒ‡æŒ¥å®˜èŠ‚ç‚¹æ™ºèƒ½æ‹†è§£ä»»åŠ¡
- 7 ä½ä¸“ä¸šä¸“å®¶ååŒæ‰§è¡Œï¼ˆæœç´¢/ç¼–ç¨‹/ç ”ç©¶/åˆ†æ/å†™ä½œ/è§„åˆ’/å›¾åƒåˆ†æï¼‰
- èšåˆå™¨èŠ‚ç‚¹æ•´åˆæ‰€æœ‰ä¸“å®¶ç»“æœ
- é€‚ç”¨äºå¤æ‚ä»»åŠ¡ã€æ·±åº¦åˆ†æåœºæ™¯

### ğŸ¨ XPouchLayout ä¸‰åŒºæ‰å¹³å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åº”ç”¨çº§å¸ƒå±€ (AppLayout)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ ä¾§è¾¹æ   â”‚  â”‚           é¡µé¢çº§å¸ƒå±€ (XPouchLayout)             â”‚   â”‚
â”‚ (92px)  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚         â”‚  â”‚  â”‚ ä¸“å®¶çŠ¶æ€æ  â”‚  Artifact å®¹å™¨  â”‚ å¯¹è¯é¢æ¿     â”‚  â”‚   â”‚
â”‚         â”‚  â”‚  â”‚ (å·¦ä¾§)    â”‚ (ä¸­é—´ 70%)      â”‚ (å³ä¾§ 30%)   â”‚  â”‚   â”‚
â”‚         â”‚  â”‚  â”‚          â”‚                 â”‚              â”‚  â”‚   â”‚
â”‚         â”‚  â”‚  â”‚          â”‚  ä»£ç /HTML/     â”‚  æ¯›ç»ç’ƒæ•ˆæœ   â”‚  â”‚   â”‚
â”‚         â”‚  â”‚  â”‚ å®æ—¶çŠ¶æ€  â”‚  Markdown/      â”‚  æ¶ˆæ¯å†å²     â”‚  â”‚   â”‚
â”‚         â”‚  â”‚  â”‚ è¿›åº¦å±•ç¤º  â”‚  æœç´¢ç»“æœ       â”‚  è¾“å…¥æ¡†       â”‚  â”‚   â”‚
â”‚         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        åº•éƒ¨å¯¼èˆªæ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ§  æŒ‡æŒ¥å®˜å·¥ä½œæµï¼ˆCommander Workflowï¼‰

```
ç”¨æˆ·è¾“å…¥ â†’ æ„å›¾è¯†åˆ« â†’ ä»»åŠ¡æ‹†è§£ â†’ ä¸“å®¶åˆ†å‘ â†’ ç»“æœèšåˆ â†’ æœ€ç»ˆå“åº”
                         â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â†“         â†“         â†“         â†“         â†“
          æœç´¢ä¸“å®¶   ç¼–ç¨‹ä¸“å®¶   ç ”ç©¶ä¸“å®¶   åˆ†æä¸“å®¶   å†™ä½œä¸“å®¶
          (search)  (coder)   (researcher) (analyzer) (writer)
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
                          è§„åˆ’ä¸“å®¶/å›¾åƒåˆ†æä¸“å®¶
                          (planner/image_analyzer)
```

### ğŸ“¦ Artifact äº§ç‰©ç³»ç»Ÿ

æ”¯æŒå¤šç§ç±»å‹äº§ç‰©çš„æ¸²æŸ“å’Œå±•ç¤ºï¼š
- **ä»£ç ç‰‡æ®µï¼ˆCodeï¼‰**ï¼šè¯­æ³•é«˜äº®ã€å¤åˆ¶åŠŸèƒ½
- **HTML é¢„è§ˆ**ï¼šiframe å®æ—¶æ¸²æŸ“
- **Markdown æ–‡æ¡£**ï¼šå®‰å…¨æ¸²æŸ“ã€æ”¯æŒ GFM
- **æœç´¢ç»“æœï¼ˆSearchï¼‰**ï¼šç»“æ„åŒ–å±•ç¤º
- **çº¯æ–‡æœ¬ï¼ˆTextï¼‰**ï¼šæ ¼å¼åŒ–å±•ç¤º

### ğŸ” RBAC ä¸“å®¶ç®¡ç†ç³»ç»Ÿ

å››çº§æƒé™æ§åˆ¶ä½“ç³»ï¼š
| è§’è‰² | æƒé™ |
|------|------|
| USER | æ™®é€šç”¨æˆ·ï¼Œæ— ç®¡ç†æƒé™ |
| VIEW_ADMIN | åªæŸ¥çœ‹ä¸“å®¶é…ç½®ï¼ˆå¯é¢„è§ˆï¼‰ |
| EDIT_ADMIN | å¯ä¿®æ”¹ä¸“å®¶é…ç½®ï¼ˆå¯ä¿å­˜ï¼‰ |
| ADMIN | å®Œå…¨ç®¡ç†å‘˜ï¼ˆå¯ä¿®æ”¹é…ç½®ã€å‡çº§ç”¨æˆ·ï¼‰ |

### ğŸŒ å›½é™…åŒ–æ”¯æŒ

æ”¯æŒä¸‰ç§è¯­è¨€ï¼š
- ç®€ä½“ä¸­æ–‡ï¼ˆzh-CNï¼‰
- Englishï¼ˆen-USï¼‰
- æ—¥æœ¬èªï¼ˆja-JPï¼‰

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 18.3.1 | UI æ¡†æ¶ |
| TypeScript | 5.7.2 | ç±»å‹ç³»ç»Ÿ |
| React Router | 7.12.0 | è·¯ç”±ç®¡ç† |
| Vite | 7.3.1 | æ„å»ºå·¥å…· |
| Zustand | 5.0.10 | çŠ¶æ€ç®¡ç† |
| Tailwind CSS | 3.4.17 | åŸå­åŒ–æ ·å¼ |
| shadcn/ui + Radix UI | Latest | æ— å¤´ç»„ä»¶åº“ |
| Framer Motion | 12.29.0 | åŠ¨ç”»ä¸äº¤äº’ |
| Lucide React | 0.563.0 | å›¾æ ‡åº“ |
| React Markdown | 10.1.0 | Markdown æ¸²æŸ“ |
| Mermaid | 11.12.2 | æµç¨‹å›¾æ¸²æŸ“ |
| DOMPurify | 3.3.1 | HTML å®‰å…¨å‡€åŒ– |
| Sentry | 10.36.0 | é”™è¯¯ç›‘æ§ |

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Python | 3.13+ | åç«¯è¯­è¨€ |
| FastAPI | 0.128.0+ | å¼‚æ­¥ Web æ¡†æ¶ |
| Uvicorn | 0.40.0+ | ASGI æœåŠ¡å™¨ |
| LangGraph | 1.0.6+ | AI å·¥ä½œæµç¼–æ’ |
| LangChain OpenAI | 1.1.7+ | LLM é›†æˆ |
| SQLModel | 0.0.31+ | ORM æ¡†æ¶ |
| PostgreSQL | 15+ | æ•°æ®åº“ |
| psycopg | 3.x | PostgreSQL é©±åŠ¨ |
| uv | Latest | Python åŒ…ç®¡ç†å™¨ |
| Alembic | 1.13.0 | æ•°æ®åº“è¿ç§» |
| PyJWT | 2.8.0 | JWT è®¤è¯ |
| Passlib | 1.7.4 | å¯†ç å“ˆå¸Œ |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    subgraph Client["å®¢æˆ·ç«¯å±‚"]
        Browser["æµè§ˆå™¨"]
        Mobile["ç§»åŠ¨ç«¯ PWA"]
    end

    subgraph Frontend["å‰ç«¯ (React + Vite)"]
        Router["React Router 7"]
        Layouts["å¸ƒå±€ç³»ç»Ÿ"]
        Pages["é¡µé¢ç»„ä»¶"]
        Components["UI ç»„ä»¶"]
        Store["Zustand çŠ¶æ€ç®¡ç†"]
        Hooks["è‡ªå®šä¹‰ Hooks"]
        Services["API æœåŠ¡å±‚"]
        I18n["å›½é™…åŒ–"]

        Router --> Layouts
        Layouts --> Pages
        Pages --> Components
        Pages --> Hooks
        Hooks --> Store
        Pages --> Services
        Services --> I18n
    end

    subgraph Backend["åç«¯ (FastAPI + Python)"]
        API["RESTful API"]
        Auth["è®¤è¯æ¨¡å—"]
        Chat["èŠå¤©æ¨¡å—"]
        Agents["æ™ºèƒ½ä½“æ¨¡å—"]
        Admin["ç®¡ç†æ¨¡å—"]

        API --> Auth
        API --> Chat
        API --> Agents
        API --> Admin
    end

    subgraph LangGraph["LangGraph å·¥ä½œæµ"]
        Commander["æŒ‡æŒ¥å®˜èŠ‚ç‚¹"]
        Dispatcher["ä¸“å®¶åˆ†å‘å™¨"]
        Experts["ä¸“å®¶èŠ‚ç‚¹æ± "]
        Aggregator["èšåˆå™¨èŠ‚ç‚¹"]

        Commander --> Dispatcher
        Dispatcher --> Experts
        Experts --> Aggregator
    end

    subgraph Database["æ•°æ®å±‚"]
        PostgreSQL["PostgreSQL 15+"]
        Cache["ä¸“å®¶é…ç½®ç¼“å­˜"]
    end

    subgraph LLM["LLM æœåŠ¡"]
        OpenAI["OpenAI GPT-4o"]
        DeepSeek["DeepSeek Chat"]
        Anthropic["Claude 3.5"]
        Google["Gemini Pro"]
    end

    Client --> Frontend
    Frontend --> |HTTP/SSE| Backend
    Backend --> LangGraph
    LangGraph --> LLM
    Backend --> Database
    Backend --> Cache
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
xpouch-ai/
â”œâ”€â”€ frontend/                          # ğŸŒ React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/                # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AppLayout.tsx          # åº”ç”¨çº§å¸ƒå±€å®¹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ XPouchLayout.tsx       # ä¸‰åŒºæ‰å¹³å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ FloatingChatPanel.tsx  # æ‚¬æµ®å¯¹è¯é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ ExpertStatusBar.tsx    # ä¸“å®¶çŠ¶æ€æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ ExpertDrawer.tsx       # ä¸“å®¶è¯¦æƒ…æŠ½å±‰
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx            # ä¾§è¾¹æ ä¸»ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GlowingInput.tsx       # å‘å…‰è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminRoute.tsx         # è·¯ç”±é‰´æƒç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx      # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ artifacts/             # Artifact ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CodeArtifact.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocArtifact.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HtmlArtifact.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchArtifact.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TextArtifact.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ bauhaus/               # Bauhaus é£æ ¼ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/                  # èŠå¤©ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/                # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/              # è®¾ç½®ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ui/                    # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/                     # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ home/                  # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/                  # ç»Ÿä¸€èŠå¤©é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ history/               # å†å²è®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge/             # çŸ¥è¯†åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ agent/                 # æ™ºèƒ½ä½“ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ admin/                 # ç®¡ç†åå°
â”‚   â”‚   â”œâ”€â”€ providers/                 # Provider ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/                     # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ chatStore.ts           # å¯¹è¯çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ userStore.ts           # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ canvasStore.ts         # ç”»å¸ƒçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ hooks/                     # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useChat.ts             # èŠå¤©é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ useChatCore.ts         # æ ¸å¿ƒèŠå¤©é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ useExpertHandler.ts    # ä¸“å®¶äº‹ä»¶å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ useArtifactHandler.ts  # Artifact å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ useConversation.ts     # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ services/                  # API æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts                 # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ admin.ts               # Admin API
â”‚   â”‚   â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ agentUtils.ts          # æ™ºèƒ½ä½“å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.ts              # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ errorHandler.ts        # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ i18n/                      # å›½é™…åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               # i18n é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ translations.ts        # ç¿»è¯‘æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ models.ts              # æ¨¡å‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ constants/                 # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ experts.ts             # ä¸“å®¶é…ç½®
â”‚   â”‚   â”œâ”€â”€ types/                     # TypeScript ç±»å‹
â”‚   â”‚   â”œâ”€â”€ router.tsx                 # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ main.tsx                   # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ index.css                  # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ public/                        # é™æ€èµ„æº
â”‚   â”œâ”€â”€ nginx.conf                     # Nginx é…ç½®
â”‚   â”œâ”€â”€ package.json                   # NPM ä¾èµ–
â”‚   â”œâ”€â”€ tsconfig.json                  # TypeScript é…ç½®
â”‚   â”œâ”€â”€ vite.config.ts                 # Vite é…ç½®
â”‚   â””â”€â”€ Dockerfile                     # Docker é•œåƒ
â”‚
â”œâ”€â”€ backend/                           # ğŸ”§ Python åç«¯
â”‚   â”œâ”€â”€ agents/                        # LangGraph æ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ graph.py                   # æŒ‡æŒ¥å®˜å·¥ä½œæµå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ expert_loader.py           # ä¸“å®¶é…ç½®åŠ è½½å™¨
â”‚   â”‚   â”œâ”€â”€ dynamic_experts.py         # åŠ¨æ€ä¸“å®¶èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ experts.py                 # ä¸“å®¶æ± å®ç°
â”‚   â”‚   â””â”€â”€ system_prompts.py          # ç³»ç»Ÿæç¤ºè¯
â”‚   â”œâ”€â”€ api/                           # API ç«¯ç‚¹
â”‚   â”‚   â””â”€â”€ admin.py                   # Admin API
â”‚   â”œâ”€â”€ routers/                       # è·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ chat.py                    # èŠå¤© API
â”‚   â”‚   â”œâ”€â”€ agents.py                  # æ™ºèƒ½ä½“ API
â”‚   â”‚   â””â”€â”€ system.py                  # ç³»ç»Ÿ API
â”‚   â”œâ”€â”€ crud/                          # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ utils/                         # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ llm_factory.py             # LLM å·¥å‚
â”‚   â”‚   â”œâ”€â”€ json_parser.py             # JSON è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ exceptions.py              # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â””â”€â”€ artifacts.py               # Artifact å·¥å…·
â”‚   â”œâ”€â”€ migrations/                    # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â”œâ”€â”€ apply_all_migrations.sql   # ç»Ÿä¸€è¿ç§»è„šæœ¬
â”‚   â”‚   â””â”€â”€ run_migration.sh           # è¿ç§»æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ scripts/                       # è„šæœ¬ç›®å½•
â”‚   â”‚   â””â”€â”€ init_experts.py            # ä¸“å®¶åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ models.py                      # SQLModel æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ database.py                    # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ config.py                      # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ constants.py                   # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ auth.py                        # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ dependencies.py                # ä¾èµ–æ³¨å…¥
â”‚   â”œâ”€â”€ main.py                        # FastAPI å…¥å£
â”‚   â”œâ”€â”€ pyproject.toml                 # Python é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ .env.example                   # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ Dockerfile                     # Docker é•œåƒ
â”‚
â”œâ”€â”€ data/                              # æ•°æ®ç›®å½•
â”œâ”€â”€ pnpm-workspace.yaml                # pnpm workspace é…ç½®
â”œâ”€â”€ docker-compose.yml                 # Docker ç¼–æ’é…ç½®
â”œâ”€â”€ deploy.sh                          # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ CHANGELOG.md                       # æ›´æ–°æ—¥å¿—
â””â”€â”€ README.md                          # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

**1. å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/your-username/xpouch-ai.git
cd xpouch-ai
```

**2. é…ç½®ç¯å¢ƒå˜é‡**

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp backend/.env.example backend/.env

# ç¼–è¾‘é…ç½®
vim backend/.env
```

å¿…å¡«é…ç½®ï¼š
```env
# LLM API Keyï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
OPENAI_API_KEY=sk-your-key-here
# æˆ–
DEEPSEEK_API_KEY=sk-your-deepseek-key

# PostgreSQL è¿æ¥
DATABASE_URL=postgresql+psycopg://user:password@host:port/dbname

# JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹ï¼‰
JWT_SECRET_KEY=your-secure-random-key
```

**3. æ‰§è¡Œæ•°æ®åº“è¿ç§»**

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨è¿ç§»è„šæœ¬ï¼ˆæ¨èï¼‰
cd backend
chmod +x migrations/run_migration.sh
./migrations/run_migration.sh

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ‰§è¡Œ SQL
psql -h localhost -U postgres -d xpouch_ai -f migrations/apply_all_migrations.sql
```

**4. å¯åŠ¨æœåŠ¡**

```bash
docker-compose up --build -d
```

**5. è®¿é—®åº”ç”¨**

| æœåŠ¡ | åœ°å€ |
|------|------|
| å‰ç«¯ | http://localhost:8080 |
| åç«¯ API | http://localhost:8080/api |
| API æ–‡æ¡£ | http://localhost:8080/docs |

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

**å‰ç½®è¦æ±‚**

- Node.js >= 18.0.0
- Python >= 3.13
- PostgreSQL 15+
- pnpm >= 8.0.0
- uvï¼ˆæ¨èï¼‰

**1. å®‰è£…ä¾èµ–**

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
pnpm install

# åç«¯ä½¿ç”¨ uvï¼ˆå·²è‡ªåŠ¨å¤„ç†ï¼‰
```

**2. é…ç½®ç¯å¢ƒå˜é‡**

```bash
# åç«¯é…ç½®
cp backend/.env.example backend/.env
# ç¼–è¾‘ backend/.env

# å‰ç«¯é…ç½®ï¼ˆå¯é€‰ï¼‰
# cp frontend/.env.example frontend/.env
```

**3. å¯åŠ¨æœåŠ¡**

```bash
# å¯åŠ¨å‰åç«¯ï¼ˆå¹¶å‘è¿è¡Œï¼‰
pnpm run dev

# æˆ–åˆ†åˆ«å¯åŠ¨
pnpm run dev:frontend  # å‰ç«¯ http://localhost:5173
pnpm run dev:backend   # åç«¯ http://localhost:3002
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç®€å•æ¨¡å¼å¯¹è¯

1. åœ¨é¦–é¡µè¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜
2. é€‰æ‹©é»˜è®¤åŠ©æ‰‹æˆ–è‡ªå®šä¹‰æ™ºèƒ½ä½“
3. è·å¾—å³æ—¶å“åº”

### å¤æ‚æ¨¡å¼ä»»åŠ¡

1. ç‚¹å‡»é¦–é¡µå³ä¸Šè§’åˆ‡æ¢åˆ°"AIåŠ©æ‰‹"
2. è¾“å…¥å¤æ‚éœ€æ±‚ï¼ˆå¦‚"å¸®æˆ‘åˆ†æè¿™ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ¶æ„"ï¼‰
3. æŒ‡æŒ¥å®˜è‡ªåŠ¨æ‹†è§£ä»»åŠ¡
4. å„ä¸“å®¶ååŒæ‰§è¡Œ
5. æŸ¥çœ‹å³ä¾§é¢æ¿çš„ä¸“å®¶è¿›åº¦å’Œ Artifact äº§ç‰©

### åˆ›å»ºè‡ªå®šä¹‰æ™ºèƒ½ä½“

1. ç‚¹å‡»é¦–é¡µ"åˆ›å»ºæ™ºèƒ½ä½“"æŒ‰é’®
2. å¡«å†™æ™ºèƒ½ä½“é…ç½®ï¼š
   - åç§°å’Œæè¿°
   - ç³»ç»Ÿæç¤ºè¯
   - é€‰æ‹©æ¨¡å‹
   - é€‰æ‹©åˆ†ç±»
3. å®æ—¶é¢„è§ˆæ•ˆæœ
4. ä¿å­˜åå³å¯ä½¿ç”¨

### ä¸“å®¶ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰

1. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
2. ç‚¹å‡»ä¾§è¾¹æ "ä¸“å®¶ç®¡ç†"
3. å¯ä¿®æ”¹ä¸“å®¶çš„ï¼š
   - ç³»ç»Ÿæç¤ºè¯
   - ä½¿ç”¨çš„æ¨¡å‹
   - æ¸©åº¦å‚æ•°
4. ä¿å­˜åç«‹å³ç”Ÿæ•ˆ

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯é…ç½®ï¼ˆbackend/.envï¼‰

| å˜é‡ | è¯´æ˜ | å¿…éœ€ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `PORT` | æœåŠ¡ç«¯å£ | å¦ | `3002` |
| `DATABASE_URL` | PostgreSQL è¿æ¥ä¸² | æ˜¯ | - |
| `OPENAI_API_KEY` | OpenAI API å¯†é’¥ | æ˜¯* | - |
| `DEEPSEEK_API_KEY` | DeepSeek API å¯†é’¥ | æ˜¯* | - |
| `JWT_SECRET_KEY` | JWT å¯†é’¥ | æ˜¯ | - |
| `CORS_ORIGINS` | å…è®¸çš„è·¨åŸŸæ¥æº | å¦ | - |

> * è‡³å°‘éœ€è¦é…ç½®ä¸€ä¸ª LLM æä¾›å•†çš„ API å¯†é’¥

### å‰ç«¯é…ç½®ï¼ˆfrontend/.envï¼‰

| å˜é‡ | è¯´æ˜ | å¿…éœ€ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `VITE_API_URL` | åç«¯ API åœ°å€ | å¦ | `/api` |

## ğŸ”’ å®‰å…¨é…ç½®

### ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä¿®æ”¹ JWT å¯†é’¥**ï¼š
   ```bash
   python -c "import secrets; print(secrets.token_urlsafe(32))"
   ```

2. **é…ç½® CORS ç™½åå•**ï¼š
   ```env
   CORS_ORIGINS=https://your-domain.com
   ```

3. **ä½¿ç”¨å¼ºæ•°æ®åº“å¯†ç **

4. **å¯ç”¨ HTTPS**

### æƒé™ç®¡ç†

| API ç«¯ç‚¹ | æ‰€éœ€æƒé™ |
|----------|----------|
| GET /api/agents | æ— éœ€è®¤è¯ |
| POST /api/agents | å·²ç™»å½•ç”¨æˆ· |
| DELETE /api/agents/:id | æ‰€æœ‰è€…æˆ– ADMIN |
| GET /api/admin/experts | VIEW_ADMIN+ |
| PATCH /api/admin/experts/:key | EDIT_ADMIN+ |
| POST /api/admin/promote-user | ADMIN only |

## ğŸ§ª æµ‹è¯•

```bash
# å‰ç«¯å•å…ƒæµ‹è¯•
pnpm --prefix frontend run test

# å‰ç«¯ lint
pnpm --prefix frontend run lint
```

## ğŸ“š æŠ€æœ¯æ–‡æ¡£

- [CHANGELOG.md](./CHANGELOG.md) - è¯¦ç»†çš„æ›´æ–°æ—¥å¿—
- [API æ–‡æ¡£](http://localhost:3002/docs) - FastAPI Swagger æ–‡æ¡£
- LangSmith è¿½è¸ªï¼ˆéœ€é…ç½®ç¯å¢ƒå˜é‡ï¼‰

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¼€å‘è§„èŒƒ

- **ä»£ç é£æ ¼**ï¼šéµå¾ª ESLint å’Œ Prettier é…ç½®
- **æäº¤ä¿¡æ¯**ï¼šä½¿ç”¨ Conventional Commits è§„èŒƒ
- **æµ‹è¯•**ï¼šä¸ºæ–°å¢åŠŸèƒ½ç¼–å†™å•å…ƒæµ‹è¯•
- **æ–‡æ¡£**ï¼šæ›´æ–°ç›¸å…³æ–‡æ¡£å’Œ CHANGELOG

### æäº¤ Pull Request

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'feat: add amazing feature'`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æ‰“å¼€ Pull Request å¹¶æè¿°æ›´æ”¹å†…å®¹

### æŠ¥å‘Šé—®é¢˜

- [Bug åé¦ˆ](https://github.com/your-username/xpouch-ai/issues/new?template=bug_report.md)
- [åŠŸèƒ½å»ºè®®](https://github.com/your-username/xpouch-ai/issues/new?template=feature_request.md)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](./LICENSE) å¼€æºã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [LangGraph](https://github.com/langchain-ai/langgraph) - AI å·¥ä½œæµæ¡†æ¶
- [shadcn/ui](https://ui.shadcn.com/) - ç¾è§‚çš„ UI ç»„ä»¶åº“
- [Framer Motion](https://www.framer.com/motion/) - React åŠ¨ç”»åº“
- [Tailwind CSS](https://tailwindcss.com/) - åŸå­åŒ– CSS æ¡†æ¶
- [Radix UI](https://www.radix-ui.com/) - æ— å¤´ UI ç»„ä»¶
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£ Python Web æ¡†æ¶

## ğŸ“® è”ç³»æ–¹å¼

- **ä½œè€…**ï¼šXPouch Team
- **ä»“åº“**ï¼šhttps://github.com/your-username/xpouch-ai
- **é—®é¢˜åé¦ˆ**ï¼šhttps://github.com/your-username/xpouch-ai/issues

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼â­
