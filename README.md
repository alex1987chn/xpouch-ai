# XPouch AI

åŸºäº LangGraph çš„é«˜é¢œå€¼å¤šæ™ºèƒ½ä½“ AI åŠ©æ‰‹ï¼Œæ”¯æŒ**åŒå±‚äº¤äº’ç”»å¸ƒ**ä¸**å®æ—¶å†…å®¹æ¸²æŸ“**ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ğŸ¨ åŒå±‚äº¤äº’ç”»å¸ƒ (æ ¸å¿ƒäº®ç‚¹)

**åº•å±‚ - å¯äº¤äº’ç”»å¸ƒ (Interactive Canvas)**
- å…¨å±è¦†ç›– (`h-screen w-screen`)ï¼Œå›ºå®šå®šä½ä¸é®æŒ¡
- å¾„å‘æ¸å˜ + ç½‘æ ¼èƒŒæ™¯ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼
- **ç¼©æ”¾åŠŸèƒ½**ï¼šæ»šè½®ç¼©æ”¾ (25%-300%)ï¼Œåº•éƒ¨æ§åˆ¶æ 
- **å¹³ç§»åŠŸèƒ½**ï¼šæ‹–æ‹½ç§»åŠ¨ï¼Œé¼ æ ‡æ‰‹åŠ¿æµç•…
- **Artifact æ¸²æŸ“**ï¼šæ ¹æ®ç±»å‹åŠ¨æ€å±•ç¤ºä»£ç é¢„è§ˆã€æµç¨‹å›¾ã€Markdown æ–‡æ¡£

**é¡¶å±‚ - æ‚¬æµ®å¯¹è¯é¢æ¿ (Floating Chat Overlay)**
- æ¯›ç»ç’ƒæ•ˆæœ (`bg-white/90 backdrop-blur-xl`)
- åœ†è§’è®¾è®¡ (`rounded-2xl`)ï¼Œé«˜æ·±åº¦é˜´å½± (`shadow-2xl`)
- **å¯æ”¶èµ·/å±•å¼€**ï¼šå³ä¸Šè§’æ”¶èµ·æŒ‰é’® + å³ä¸‹è§’æœºå™¨äººæ¢å¤æŒ‰é’®
- **å¹³æ»‘åŠ¨ç”»**ï¼š300ms ease-in-out è¿‡æ¸¡ï¼Œç´«è‰²æ¸å˜æœºå™¨äººå›¾æ ‡
- **å‘¼å¸æ•ˆæœ**ï¼šæœºå™¨äººæ¢å¤æŒ‰é’®å¸¦ `animate-bounce` æç¤ºäº¤äº’
- **ç‚¹å‡»ç©¿é€**ï¼šæ”¶èµ·å `pointer-events-none` ç¡®ä¿ç”»å¸ƒå¯ç‚¹å‡»

### ğŸ¤– AI æ™ºèƒ½ä½“
- **8 ä¸ªä¸“ä¸šåŒ– AI æ™ºèƒ½ä½“**ï¼šå†…ç½®ä¸åŒåœºæ™¯çš„ä¸“å®¶åŠ©æ‰‹
- **è‡ªå®šä¹‰æ™ºèƒ½ä½“åˆ›å»º**ï¼šç”¨æˆ·å¯æ„å»ºä¸ªæ€§åŒ– AI åŠ©æ‰‹
- **LangGraph å·¥ä½œæµ**ï¼šPython ç‰ˆæ™ºèƒ½ä½“å¼•æ“

### ğŸ’¬ å¯¹è¯ä½“éªŒ
- **å®æ—¶æ‰“å­—æ•ˆæœ**ï¼šè‡ªç„¶çš„æ¶ˆæ¯ç”Ÿæˆä¸æ‰“å­—åŠ¨ç”»
- **SSE æµå¼å“åº”**ï¼šåŸºäº Token çš„å®æ—¶æµå¼ä¼ è¾“
- **ä¸Šä¸‹æ–‡è®°å¿†**ï¼šè‡ªåŠ¨ä¿å­˜å’Œæ¢å¤å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡

### ğŸ§­ äº§å“è·¯çº¿å›¾

**å½“å‰é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å®Œå–„ (v0.2.x)**
- âœ… åŒå±‚äº¤äº’ç”»å¸ƒç³»ç»Ÿ
- âœ… åŸºç¡€ AI æ™ºèƒ½ä½“å·¥ä½œæµ
- âœ… æ•°æ®æŒä¹…åŒ–ä¸å†å²ç®¡ç†
- âœ… å®Œæ•´çš„ UI/UX ä½“ç³»

**ä¸‹ä¸€é˜¶æ®µï¼šè¶…æ™ºèƒ½ä½“æ¢ç´¢ (v0.3.x)**
- ğŸ”® **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šæ™ºèƒ½ä½“ä¹‹é—´çš„åŠ¨æ€ä»»åŠ¡åˆ†å·¥ä¸åä½œæœºåˆ¶
- ğŸ”® **è‡ªä¸»å†³ç­–ç³»ç»Ÿ**ï¼šåŸºäºä¸Šä¸‹æ–‡çš„æ™ºèƒ½ä»»åŠ¡æ‹†è§£ä¸æ‰§è¡Œè§„åˆ’
- ğŸ”® **çŸ¥è¯†å¢å¼ºå¼•æ“**ï¼šçŸ¥è¯†åº“æ£€ç´¢ä¸å®æ—¶å­¦ä¹ èƒ½åŠ›
- ğŸ”® **æ¨ç†ä¸åæ€**ï¼šè‡ªæˆ‘çº é”™ã€å¤šæ­¥æ¨ç†ã€æ€ç»´é“¾æœºåˆ¶
- ğŸ”® **å·¥å…·è°ƒç”¨æ¡†æ¶**ï¼šå¯æ’æ‹”çš„å·¥å…·ç”Ÿæ€ç³»ç»Ÿï¼ˆæœç´¢ã€è®¡ç®—ã€ä»£ç æ‰§è¡Œç­‰ï¼‰

### ğŸ¯ ç•Œé¢ç‰¹æ€§
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…ç§»åŠ¨ç«¯ã€å¹³æ¿å’Œæ¡Œé¢è®¾å¤‡
- **ç§»åŠ¨ç«¯æ‰‹åŠ¿**ï¼šå·¦ä¾§è¾¹ç¼˜å³æ»‘è¿”å›ï¼ˆ30px è§¦å‘åŒºåŸŸï¼‰
- **æ·±è‰²æ¨¡å¼æ”¯æŒ**ï¼šæ ¹æ®ç³»ç»Ÿåå¥½è‡ªåŠ¨åˆ‡æ¢ä¸»é¢˜ï¼Œå¹³æ»‘è¿‡æ¸¡åŠ¨ç”»
- **å›½é™…åŒ–**ï¼šæ”¯æŒè‹±è¯­ã€ä¸­æ–‡å’Œæ—¥è¯­
- **è·¯ç”±ç®¡ç†**ï¼šReact Router æ·±åº¦é›†æˆï¼Œæ”¯æŒ URL åˆ†äº«ä¼šè¯
- **Glassmorphism è®¾è®¡**ï¼šæ¯›ç»ç’ƒæ•ˆæœ + æ·±åº¦é˜´å½± + æµç•…åŠ¨ç”»

### ğŸ’¾ æ•°æ®æŒä¹…åŒ–
- **SQLite äº‘ç«¯åŒæ­¥**ï¼šèŠå¤©è®°å½•æŒä¹…åŒ–å­˜å‚¨
- **å†å²è®°å½•ç®¡ç†**ï¼šæŒ‰æ—¶é—´æ’åºï¼Œæ”¯æŒæŸ¥çœ‹å’Œåˆ é™¤

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **Zustand å…¨å±€çŠ¶æ€ç®¡ç†**ï¼šç»„ä»¶é€»è¾‘ä¸è§†å›¾åˆ†ç¦»
- **æ™ºèƒ½ç¼“å­˜ä¸æŒ‰éœ€åŠ è½½**
- **æŒ‰éœ€æ¸²æŸ“**ï¼šäº¤äº’åŒºåŸŸåŠ¨æ€åŠ è½½

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| React 18.3.1 + TypeScript 5.6 | UI æ¡†æ¶ |
| React Router 7 | è·¯ç”±ç®¡ç† |
| Zustand | å…¨å±€çŠ¶æ€ç®¡ç† |
| Vite 5.4.17 | æ„å»ºå·¥å…· |
| Tailwind CSS 3.4.17 | æ ·å¼ |
| shadcn/ui + Radix UI | ç»„ä»¶åº“ |
| Framer Motion 11.15.0 | åŠ¨ç”»ä¸äº¤äº’ |
| Lucide React | å›¾æ ‡ |
| Mermaid 11.4.0 | æµç¨‹å›¾æ¸²æŸ“ |
| Vitest | æµ‹è¯• |

### åç«¯
| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Python 3.10+ | åç«¯è¯­è¨€ |
| FastAPI + Uvicorn | Web æ¡†æ¶ |
| LangGraph + LangChain | AI å·¥ä½œæµ |
| SQLModel + SQLite | ORM + æ•°æ®åº“ |
| uv | åŒ…ç®¡ç† |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TD
    User[ç”¨æˆ· Browser] -->|HTTP/SSE| Frontend[React Frontend]
    
    subgraph Interactive Canvas
        Canvas[Interactive Canvas] -->|Render| Artifacts[Artifact Renderer]
        Artifacts -->|Types| Code[Code Preview]
        Artifacts -->|Types| Mermaid[Mermaid Diagram]
        Artifacts -->|Types| Markdown[Markdown Doc]
    end
    
    subgraph Floating Panel
        ChatPanel[Floating Chat Panel] <-->|SSE| Backend
    end
    
    Frontend -->|API| Nginx[Nginx Gateway]
    Nginx -->|Proxy| Backend[FastAPI Backend]
    Backend -->|LangGraph| LLM[LLM API]
    Backend <-->|SQLModel| DB[(SQLite)]
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

**Monorepo æ¶æ„** - å‰åç«¯åˆ†ç¦»ï¼š

```
xpouch-ai/
â”œâ”€â”€ frontend/                      # ğŸŒ React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/            # ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ CanvasChatPage.tsx    # ç”»å¸ƒèŠå¤©ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ InteractiveCanvas.tsx # å¯äº¤äº’ç”»å¸ƒ â­NEW
â”‚   â”‚   â”‚   â”œâ”€â”€ FloatingChatPanel.tsx # æ‚¬æµ®å¯¹è¯é¢æ¿ â­NEW
â”‚   â”‚   â”‚   â”œâ”€â”€ ArtifactRenderer.tsx  # å†…å®¹æ¸²æŸ“å™¨ â­NEW
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskCanvas.tsx        # ä»»åŠ¡ç”»å¸ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx           # ä¾§è¾¹æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ GlowingInput.tsx      # å‘å…‰è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ store/                 # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ chatStore.ts          # å¯¹è¯å†å²
â”‚   â”‚   â”‚   â””â”€â”€ canvasStore.ts        # ç”»å¸ƒçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useChat.ts             # èŠå¤©é€»è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ useArtifactListener.ts # SSE ç›‘å¬ â­NEW
â”‚   â”‚   â”œâ”€â”€ services/              # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ config/                # é…ç½®
â”‚   â”‚   â””â”€â”€ i18n/                  # å›½é™…åŒ–
â”‚   â”œâ”€â”€ vite.config.ts             # Vite é…ç½®
â”‚   â””â”€â”€ nginx.conf                 # Nginx é…ç½® (Docker)
â”‚
â”œâ”€â”€ backend/                       # ğŸ”§ Python åç«¯
â”‚   â”œâ”€â”€ agents/                    # LangGraph æ™ºèƒ½ä½“
â”‚   â”‚   â””â”€â”€ graph.py               # å·¥ä½œæµå®šä¹‰
â”‚   â”œâ”€â”€ main.py                    # FastAPI å…¥å£ & ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models.py                  # SQLModel æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ database.py                # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ pyproject.toml             # Python ä¾èµ–
â”‚   â””â”€â”€ data/                      # æ•°æ®æŒä¹…åŒ–ç›®å½•
â”‚
â”œâ”€â”€ docker-compose.yml             # ğŸ³ Docker ç¼–æ’
â””â”€â”€ README.md                      # ğŸ“š æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

- Node.js >= 16.0.0
- Python >= 3.10
- `uv` (æ¨èçš„ Python åŒ…ç®¡ç†å™¨)

### å®‰è£…

**1. å®‰è£…å‰ç«¯ä¾èµ–**

```bash
cd frontend
pnpm install
```

**2. å®‰è£…åç«¯ä¾èµ–**

```bash
cd backend
uv sync
```

### é…ç½®

**åç«¯é…ç½®** - å¤åˆ¶ `backend/.env.example` åˆ° `backend/.env`ï¼š

```env
PORT=3002

# æ¨¡å‹æä¾›å•† API Keysï¼ˆè‡³å°‘é€‰æ‹©ä¸€ä¸ªï¼‰
OPENAI_API_KEY=your-api-key
OPENAI_BASE_URL=https://api.openai.com/v1

DEEPSEEK_API_KEY=your-deepseek-key
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
```

**å‰ç«¯é…ç½®** - å¤åˆ¶ `frontend/.env.example` åˆ° `frontend/.env`ï¼š

```env
VITE_API_URL=/api
```

### è¿è¡Œåº”ç”¨

**1. å¯åŠ¨åç«¯**

```bash
cd backend
uv run main.py
```
åç«¯å°†åœ¨ http://localhost:3002 è¿è¡Œã€‚

**2. å¯åŠ¨å‰ç«¯**

```bash
cd frontend
pnpm run dev
```
å‰ç«¯å°†åœ¨ http://localhost:5173 è¿è¡Œã€‚

## ğŸ³ Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

æœ¬é¡¹ç›®å·²å®Œå…¨å®¹å™¨åŒ–ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²ã€‚

### 1. å‡†å¤‡ç¯å¢ƒ

ç¡®ä¿æœåŠ¡å™¨å·²å®‰è£… [Docker](https://docs.docker.com/get-docker/) å’Œ [Docker Compose](https://docs.docker.com/compose/install/)ã€‚

### 2. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `backend` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# å¿…éœ€ï¼šè®¾ç½® API Key
OPENAI_API_KEY=sk-your-key-here
OPENAI_BASE_URL=https://api.openai.com/v1

# å¯é€‰ï¼šå¦‚æœä½¿ç”¨ DeepSeek
DEEPSEEK_API_KEY=sk-your-deepseek-key
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
```

### 3. å¯åŠ¨æœåŠ¡

```bash
docker-compose up --build -d
```

### 4. è®¿é—®åº”ç”¨

æœåŠ¡å¯åŠ¨åï¼Œè®¿é—® `http://localhost:8080`ï¼š

- å‰ç«¯ï¼š`http://localhost:8080`
- åç«¯ APIï¼š`http://localhost:8080/api`

### 5. æ•°æ®æŒä¹…åŒ–

æ‰€æœ‰æ•°æ®ï¼ˆæ•°æ®åº“æ–‡ä»¶ï¼‰ä¼šè‡ªåŠ¨ä¿å­˜åœ¨ `./data` æ–‡ä»¶å¤¹ä¸­ã€‚

### 6. æ›´æ–°éƒ¨ç½²

```bash
git pull
docker-compose up --build -d
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŒå±‚äº¤äº’ç”»å¸ƒ

1. **ç¼©æ”¾**ï¼šä½¿ç”¨é¼ æ ‡æ»šè½®æˆ–åº•éƒ¨æ§åˆ¶æ ï¼ˆ25%-300%ï¼‰
2. **å¹³ç§»**ï¼šæŒ‰ä½ç”»å¸ƒç©ºç™½åŒºåŸŸæ‹–åŠ¨
3. **æ”¶èµ·é¢æ¿**ï¼šç‚¹å‡»å³ä¸Šè§’æ”¶èµ·å›¾æ ‡
4. **æ¢å¤é¢æ¿**ï¼šç‚¹å‡»å³ä¸‹è§’ç´«è‰²æœºå™¨äººæŒ‰é’®
5. **ç§»åŠ¨ç«¯è¿”å›**ï¼šä»å±å¹•å·¦ä¾§è¾¹ç¼˜å³æ»‘è¿”å›é¦–é¡µï¼ˆæ»‘åŠ¨ >100px è§¦å‘ï¼‰

### Artifact æ¸²æŸ“

- **ä»£ç **ï¼šè‡ªåŠ¨è¯†åˆ«å¹¶æ¸²æŸ“ä»£ç é¢„è§ˆ
- **Mermaid**ï¼šåŠ¨æ€æ¸²æŸ“æµç¨‹å›¾ã€æ—¶åºå›¾ç­‰
- **Markdown**ï¼šå®‰å…¨æ¸²æŸ“ Markdown æ–‡æ¡£

## ğŸ¤ è´¡çŒ®

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚
